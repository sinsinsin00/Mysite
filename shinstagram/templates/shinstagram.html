<!DOCTYPE html>
<html lang="en">

<head>
    <title>ShInstagram</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/style.css" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Icon -->
    <link
        href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    
    <!-- jquery 사용하기 위해 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
    <!-- style -->
    <style>
        .box {
            width: 150px;
            height: 150px;
            border-radius: 70%;
            overflow: hidden;

        }

        .profile {
            width: 100%;
            height: 100%;
            object-fit: cover;

        }

        .user_id {
            margin-top: 35px;
            margin-left: 20px;

        }

        .user_image {
            margin-top: 20px;
            width: 100%
        }

        .user_contents {
            text-align: left;
            font-size: 15px;
            margin: 15px;

        }

        .comment {
            margin: 0px;
            display: flex;
            flex-direction: row;
            justify-content: space-between
        }

        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 48
        }

        .modal_overlay {
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(1.5px);
            -webkit-backdrop-filter: blur(1.5px);
        }

        .modal_window {
            background: white;
            backdrop-filter: blur(13.5px);
            -webkit-backdrop-filter: blur(13.5px);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            width: 800px;
            height: 600px;
            position: relative;
            padding: 10px;
        }

        .modal_title {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            font-weight: bold;
            font-size: 20px;
        }

        .modal_title_side {
            flex: 0 0 40px;
            text-align: center;
        }

        .modal_image_upload{
            outline: 2px dashed black;
            outline-offset: -10px;
            text-align: center;
            transition: all .15s ease-in-out;
            width: 780px;
            height: 548px;

        }

    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="position: fixed; width: 100%">
        <div class="container-fluid" style="justify-content: space-between;">
            <div>
                <a class="navbar-brand" href="/shinstagram"><img style="width: 100px;"
                        src="https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png"
                        alt=""></a>
                <a href="/"><img style="width: 100px;" src="http://evolabs.co.kr/media/EVOLABS-logo-black.png"
                        alt=""></a>
            </div>
            <input class="form-control me-2" style="width:300px;" type="search" placeholder="Search"
                aria-label="Search">
            <div>
                <span class="material-icons">home</span>
                <span class="material-icons-outlined">send</span>
                <span id="add_feed_box" class="material-icons-outlined">add_box</span>
                <span class="material-icons-outlined">explore</span>
                <span class="material-icons-outlined">favorite_border</span>
            </div>
        </div>
    </nav>
    <div
        style="display: flex; flex-direction:row; text-align: center; justify-content: center; padding-top: 70px; background-color: #FAFAFA;">
        <div style="width: 600px; min-width: 600px;height: 100%; margin-right: 400px;">
            <!--피드 시작-->
            {% for feed in feed_list %}
            <div style="border: solid 1px rgb(223, 221, 221); background-color: white; margin-top: 25px;">
                <div style="display: flex; flex-direction: row; ">
                    <div>
                        <div class="box" style="width: 60px; height: 60px; margin-top: 15px; margin-left: 15px;">
                            <img class="profile"
                                src="{{ feed.profile_image }}">
                        </div>
                    </div>
                    <div class="user_id">
                        {{ feed.user_id }}
                    </div>
                </div>
                <div><img class="user_image"
                        src="{{ feed.image }}"
                        alt=""></div>
                <div class="user_contents">
                    <div style="display: flex; flex-direction: row; justify-content: space-between">
                        <div>
                            <span class="material-icons-outlined">favorite_border</span>
                            <span class="material-icons-outlined">mode_comment</span>
                            <span class="material-icons-outlined">send</span>
                        </div>
                        <div>
                            <span class="material-icons-outlined" style="width: 25px;">book_mark</span>
                        </div>
                    </div>
                    <div>
                        <div>좋아요 {{feed.like_count}}개</div>
                        <div><b>{{ feed.user_id }}</b> {{ feed.content }}</div>
                        <div style="color: rgb(158, 156, 156)">댓글 412개 모두 보기</div>
                        <div><b>ksshin</b> 아이유 좋아!</div>
                        <div><b>kkh86</b> 아이유는 사랑이지</div>
                        <div><b>bjsjjang</b> ㅋㅋㅋㅋㅋ</div>
                        <div style="font-size: 10px; color: rgb(158, 156, 156); margin-top: 10px; ">5일 전</div>
                    </div>
                </div>
                <div
                    style="display:flex;flex-direction: row;align-items: center; border-top: solid 1px rgb(220, 220, 220) ">
                </div>
                <div class="comment">
                    <span class="material-symbols-outlined"
                        style="width: 30px; height: 30px">sentiment_very_satisfied</span>
                    <input type="text" style="box-shadow: none; border: none; outline: none;" class="form-control"
                        placeholder="댓글 달기..." aria-label="comment" aria-describedby="basic-addon1">
                </div>
            </div>
            {% endfor %}
            <!--피드엔드-->
        </div>
        
        <div style="width: 400px; height: 1000px; position: fixed; left:60%">
            <div style="width: 400px; min-width: 400px;height: 1000px; margin-right: 400px; ">
                <div>
                    <div
                        style="display: flex; flex-direction: row; align-items: center; justify-content: space-between">
                        <div style="display: flex; flex-direction: row;">
                            <div class="box" style="width: 60px; height: 60px; margin-top: 15px; margin-left: 15px;">
                                <img class="profile"
                                    src="http://t3.gstatic.com/licensed-image?q=tbn:ANd9GcQJyEHVESEqmxJrqjqvMyqz7zz0drMlAhU6FDDuT7JsOKwjcoLpkfFCOLtUZ2wP1rcf">
                            </div>
                            <div class="user_id" style="margin-top: 17px; text-align: left">
                                <div style="font-weight: bold;">
                                    IU
                                </div>
                                <div style="color: rgb(170, 170, 170)">
                                    Lee Ji-Eun
                                </div>
                            </div>
                        </div>

                        <div>
                            <a href="/#" style="text-decoration: None; font-weight: bold;">전환</a>
                        </div>
                    </div>
                </div>

                <div style="display: flex; flex-direction: row; justify-content: space-between; margin-top: 25px; ">
                    <div style="font-weight: bold; color: rgb(170, 170, 170);">
                        회원님을 위한 추천
                    </div>
                    <div>
                        <a href="/#" style="font-weight: bold; color: black; text-decoration: none;">모두 보기</a>
                    </div>
                </div>

                <div>
                    <div
                        style="display: flex; flex-direction: row; align-items: center; justify-content: space-between">
                        <div style="display: flex; flex-direction: row;">
                            <div class="box" style="width: 40px; height: 40px; margin-top: 15px; margin-left: 15px;">
                                <img class="profile"
                                    src="https://s-media-cache-ak0.pinimg.com/originals/56/ff/14/56ff14ca08165c099fc45f207520dfe0.jpg">
                            </div>
                            <div class="user_id" style="margin-top: 17px; text-align: left; font-size: 13px">
                                <div style="font-weight: bold;">
                                    Aleksandra
                                </div>
                                <div style="color: rgb(170, 170, 170);">
                                    Skkei님 외 31명이 팔로우합니다
                                </div>
                            </div>
                        </div>

                        <div>
                            <a href="/#" style="text-decoration: none; font-weight: bold;">팔로우</a>
                        </div>
                    </div>
                </div>
                <div>
                    <div
                        style="display: flex; flex-direction: row; align-items: center; justify-content: space-between">
                        <div style="display: flex; flex-direction: row;">
                            <div class="box" style="width: 40px; height: 40px; margin-top: 15px; margin-left: 15px;">
                                <img class="profile"
                                    src="http://file3.instiz.net/data/file3/2019/04/02/4/7/2/472ea455af482073b867a928edb77f0f.jpg">
                            </div>
                            <div class="user_id" style="margin-top: 17px; text-align: left; font-size: 13px">
                                <div style="font-weight: bold;">
                                    Aleksandra
                                </div>
                                <div style="color: rgb(170, 170, 170);">
                                    Skkei님 외 31명이 팔로우합니다
                                </div>
                            </div>
                        </div>

                        <div>
                            <a href="/#" style="text-decoration: none; font-weight: bold;">팔로우</a>
                        </div>
                    </div>
                </div>
                <div>
                    <div
                        style="display: flex; flex-direction: row; align-items: center; justify-content: space-between">
                        <div style="display: flex; flex-direction: row;">
                            <div class="box" style="width: 40px; height: 40px; margin-top: 15px; margin-left: 15px;">
                                <img class="profile"
                                    src="https://i.ytimg.com/vi/d2nMizSaxiA/hqdefault.jpg?sqp=-oaymwEXCNACELwBSFryq4qpAwkIARUAAIhCGAE=&rs=AOn4CLBPkPtITpQv4ZpjaW_qVZoPX-FUkA">
                            </div>
                            <div class="user_id" style="margin-top: 17px; text-align: left; font-size: 13px">
                                <div style="font-weight: bold;">
                                    Aleksandra
                                </div>
                                <div style="color: rgb(170, 170, 170);">
                                    Skkei님 외 31명이 팔로우합니다
                                </div>
                            </div>
                        </div>

                        <div>
                            <a href="/#" style="text-decoration: none; font-weight: bold;">팔로우</a>
                        </div>
                    </div>
                </div>
                <div>
                    <div
                        style="display: flex; flex-direction: row; align-items: center; justify-content: space-between">
                        <div style="display: flex; flex-direction: row;">
                            <div class="box" style="width: 40px; height: 40px; margin-top: 15px; margin-left: 15px;">
                                <img class="profile"
                                    src="https://mblogthumb-phinf.pstatic.net/MjAxNzA3MzBfMTM4/MDAxNTAxNDAwMjI3NDAw.YqWlD3dnAt3Hc6CBoO2fWfyz9vESGPaklO5W6VdQ9dsg.EOGhpJ_mf6cA5k28zYTAUipYxGXij3aO93C9NBiHXjAg.JPEG.cocoastudio-psj/1487927554173676.jpg?type=w800">
                            </div>
                            <div class="user_id" style="margin-top: 17px; text-align: left; font-size: 13px">
                                <div style="font-weight: bold;">
                                    Aleksandra
                                </div>
                                <div style="color: rgb(170, 170, 170);">
                                    Skkei님 외 31명이 팔로우합니다
                                </div>
                            </div>
                        </div>

                        <div>
                            <a href="/#" style="text-decoration: none; font-weight: bold;">팔로우</a>
                        </div>
                    </div>
                </div>
                <div>
                    <div
                        style="display: flex; flex-direction: row; align-items: center; justify-content: space-between">
                        <div style="display: flex; flex-direction: row;">
                            <div class="box" style="width: 40px; height: 40px; margin-top: 15px; margin-left: 15px;">
                                <img class="profile"
                                    src="https://t1.daumcdn.net/cfile/tistory/275BF04D53DCD1D138">
                            </div>
                            <div class="user_id" style="margin-top: 17px; text-align: left; font-size: 13px">
                                <div style="font-weight: bold;">
                                    Aleksandra
                                </div>
                                <div style="color: rgb(170, 170, 170);">
                                    Skkei님 외 31명이 팔로우합니다
                                </div>
                            </div>
                        </div>

                        <div>
                            <a href="/#" style="text-decoration: none; font-weight: bold;">팔로우</a>
                        </div>
                    </div>
                </div>
                <div style="color: rgb(170, 170, 170);  font-size: 13px; margin-top: 35px; text-align: left">                
                    <div>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;" href="/#">소개·</a></span>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;"  href="/#">도움말·</a></span>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;"  href="/#">홍보 센터·</a></span>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;"  href="/#">API·</a></span>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;"  href="/#">채용 정보·</a></span>
                    </div>
                    <div>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;" href="/#">개인정보처리방침·</a></span>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;"  href="/#">약관·</a></span>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;"  href="/#">위치·</a></span>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;"  href="/#">인기 계정·</a></span>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;"  href="/#">해시태그·</a></span>
                    </div>
                    <div>
                        <span><a style="color: rgb(170, 170, 170); text-decoration: none;" href="/#">언어·</a></span>
                    </div>
                    <p>
                    <div>
                        <span style="color: rgb(170, 170, 170); text-decoration: none; margin-top: 30px;">© 2022 INSTAGRAM FROM META</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="modal_add_feed"class="modal_overlay">
        <div class="modal_window">
            <div class="modal_title">
                <div class="modal_title_side"></div>
                <div>새 게시물</div>
                <div class="modal_title_side">
                    <span id="close_modal" class="material-icons-outlined">
                        close
                    </span>
                </div>
            </div>
            <div class="modal_image_upload">


            </div>
        </div>
    </div>

    <!-- JAVA SCRIPT START -->
    <script>
        // 모달 띄우기 코드
        const modal = document.getElementById("modal_add_feed");
        const buttonAddFeed = document.getElementById("add_feed_box");
        const buttonclosemodal = document.getElementById("close_modal");
        buttonAddFeed.addEventListener("click", e => {
            modal.style.top = window.pageYOffset + "px";// top을 이용해 시작 y위치를 바꿔줌 
            modal.style.display = "flex";               // display modal 
            document.body.style.overflowY = "hidden";   // out of scroll
        });

        // 모달 닫기 코드
        buttonclosemodal.addEventListener("click", e =>{
            modal.style.display = "none";
            document.body.style.overflowY = "visible";   // out of scroll

        }); 
        // <!-- jquery 부분 -->
        $('.modal_image_upload')
            .on("dragover", dragover)
            .on("dragleave", dragover)
            .on("drop", uploadFiles);

        function dragover(e){
            e.stopPropagation();
            e.preventDefault();

            if (e.type == "dragover") {
                $(e.target).css({
                    "background-color":"black",
                    "outline-offset":"-20px"
                });

            } else {
                $(e.target).css({
                    "background-color":"white",
                    "outline-offset":"-10px"
                });
            }
        }

        function uploadFiles(e){
            e.stopPropagation();
            e.preventDefault();

            e.dataTransfer = e.originalEvent.dataTransfer;
            var files = e.dataTransfer.files;

            if (files.length > 1) {
                alert('하나만 올려라');
                return;
            }

            if(files[0].type.match(/image.*/)){
                $(e.target).css({
                    "backround-image":"url(" + window.URL.createObjectURL(files[0]) + ")",
                    "outline": "none",
                    "background-size":"100% 100%"})

            }else{
                alert('이미지가 아닙니다');
                return;
            }
        }

    </script>
    <!-- JAVA SCRIPT END -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>